definitions:

    imports:
        - "cloudify.types"
        - "app_module.installer"
        - "host.provisioner"
        - "middleware_component.installer"

    service_templates:

        mysql_template:
            topology:
                mysql_host:
                    type: "cloudify.tosca.types.host"
                    properties:
                        image: "aws149180"

                mysql_database_server:
                    type: "cloudify.tosca.types.db_server"
                    properties:
                        port: "3306"
                        installer_recipe: "mysql_chef_recipe"
                    relationships:
                        - type: "cloudify.tosca.relationships.hosted_on"
                          target: "mysql_host"

                mysql_schema:
                    type: "cloudify.tosca.types.app_module"
                    properties:
                        name: "petclinic"
                    relationships:
                        - type: "cloudify.tosca.relationships.deployed_on"
                          target: "mysql_database_server"
