definitions:

    imports:
        - "cloudify/tosca/types/types.yaml"
        - "cloudify/tosca/artifacts/plugins/host-provisioner.yaml"
        - "cloudify/tosca/artifacts/plugins/middleware_component-installer.yaml"
        - "cloudify/tosca/artifacts/plugins/app_module-installer.yaml"

    service_template:
        mysql_host:
            derived_from: "cloudify.tosca.types.host"
            properties:
                image: "aws149180"

        mysql_database_server:
            derived_from: "cloudify.tosca.types.db_server"
            properties:
                port: "3306"
                installer_recipe: "mysql_chef_recipe"
            relationships:
                cloudify.tosca.relationships.hosted_on: "mysql_host"

        mysql_schema:
            derived_from: "cloudify.tosca.types.app_module"
            properties:
                name: "petclinic"
            relationships:
                cloudify.tosca.relationships.deployed_on: "mysql_database_server"
