imports:
    - "cloudify.types"
    - "host_provisioner"
    - "middleware_component_installer"
    - "org/cloudifysource/cosmo/dsl/unit/plugins/stub_app_installer.yaml"

application_template:
    name: "service_template"
    topology:
        -   name: "host1"
            type: "cloudify.tosca.types.host"
        -   name: "host2"
            type: "cloudify.tosca.types.host"
        -   name: "host3"
            type: "cloudify.tosca.types.host"
        -   name: "webserver1"
            type: "cloudify.tosca.types.web_server"
            relationships:
                - type: "cloudify.tosca.relationships.contained_in"
                  target: "host1"
        -   name: "webserver2"
            type: "cloudify.tosca.types.web_server"
            relationships:
                - type: "cloudify.tosca.relationships.contained_in"
                  target: "host1"
        -   name: "webserver3"
            type: "cloudify.tosca.types.web_server"
            relationships:
                - type: "cloudify.tosca.relationships.contained_in"
                  target: "host1"
                - type: "cloudify.tosca.relationships.contained_in"
                  target: "host2"
                - type: "cloudify.tosca.relationships.contained_in"
                  target: "host3"